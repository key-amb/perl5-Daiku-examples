desc 'run foo.pl';
task 'default' => 'run';

desc 'install necessary modules';
task 'install' => sub {
    sh 'cpanm --installdeps .';
};

task 'run' => ['install', 'test'] => sub {
    sh 'perl -Ilib script/foo.pl';
};

desc 'run test';
task 'test' => 'install' => sub {
    sh 'prove -Ilib -rv t/';
};
